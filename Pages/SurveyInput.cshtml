@page
@model EnergyTariffAdvisor.Pages.SurveyInputModel
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Household Survey Input</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <style>
        .table-responsive {
            max-height: 65vh;
        }

        .table thead th {
            position: sticky;
            top: 0;
            background: #f8f9fa;
            z-index: 2;
        }
        /* Пропорции колонок */
        .question-col {
            width: 90%;
        }

        .answer-col {
            width: 10%;
        }
    </style>
</head>
<body>
    <div class="container py-4">
        <h2 class="mb-4 text-center">Household Survey Input</h2>

        <form method="post">
            <div class="row mb-4">
                <div class="col-auto">
                    <label for="LoadId" class="form-label">Load by ID:</label>
                    <input asp-for="LoadId" type="number" class="form-control" style="width:110px;" />
                </div>
                <div class="col-auto align-self-end">
                    <button type="submit" asp-page-handler="Load" class="btn btn-primary">Load Survey</button>
                </div>
            </div>
        </form>

        <form method="post">
            <div class="table-responsive mb-3 border rounded">
                <table class="table table-striped table-bordered align-middle mb-0">
                    <thead class="table-light">
                        <tr>
                            <th class="question-col">Question</th>
                            <th class="answer-col">Answer</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var prop in Model.SurveyProperties)
                        {
                            var label = Model.QuestionLabels.ContainsKey(prop.Name) ? Model.QuestionLabels[prop.Name] : prop.Name;
                            <tr>
                                <td>
                                    <span class="text-black">@label</span>
                                    <span class="text-muted small">(@prop.Name)</span>
                                </td>
                                <td>
                                    <input name="Survey.@prop.Name"
                                           value="@(prop.GetValue(Model.Survey) ?? "")"
                                           type="@(prop.PropertyType == typeof(string) ? "text" : "number")"
                                           class="form-control form-control-sm" />
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
            <div class="text-center">
                <button type="submit" asp-page-handler="Save" class="btn btn-success px-4">Save Survey</button>
            </div>
        </form>
    </div>
</body>
</html>